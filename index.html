<!doctype html>
<html class="no-js" lang="">
  <head>
      <meta charset="utf-8">
      <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
      <title>Stimme Landtagswahl</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">

      <link rel="stylesheet" href="main.css">
      <link href='https://fonts.googleapis.com/css?family=Open+Sans:300,600' rel='stylesheet' type='text/css'>
      <link rel="stylesheet" href="jquery.typeahead.min.css">

      <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
      <script src="js/jquery.typeahead.min.js"></script>
  </head>
  <body>
    <div class="lw">
      <header>
        <h1>Landtagswahl</h1>
        <p>Ausführliche Vorbericht- und Berichterstattung zur Landtagswahl 2016 in Baden Württemberg am 13. März 2016</p>
      </header>

      <section class="issues">
        <h2><span>Unsere Themen</span></h2>
        <p>Dieser Blindtext wird gerade durch 130 Millionen Rezeptoren Ihrer Netzhaut erfasst. Die Zellen werden dadurch in einen Erregungszustand versetzt, der sich über den Sehnerv in dem hinteren Teil Ihres Gehirns ausbreitet. Von dort aus überträgt sich die Erregung in Sekunden-bruchteilen auch in andere Bereiche Ihres Grosshirns.</p>
      </section>

      <section>
        <h3>Wahlkreise der Region</h3>
        <div class="tile-grid">
          <div class="tile"><a class="logo" href="" id="wk-19"><span>EP</span></a><div class="title">Eppingen</div><div class="description">Das ist eine Beispiel Stadt zum testen und ausprobieren</div></div>
          <div class="tile"><a class="logo" href="" id="wk-18"><span>HN</span></a><div class="title">Heilbronn</div><div class="description">Das ist eine Beispiel Stadt zum testen und ausprobieren</div></div>
          <div class="tile"><a class="logo" href="" id="wk-20"><span>NSU</span></a><div class="title">Neckarsulm</div><div class="description">Das ist eine Beispiel Stadt zum testen und ausprobieren</div></div>
          <div class="tile"><a class="logo" href="" id="wk-21"><span>HOH</span></a><div class="title">Hohenlohe</div><div class="description">Das ist eine Beispiel Stadt zum testen und ausprobieren</div></div>
          <div class="tile search"><span class="logo" href=""><span class="search-logo" alt="Suche" title="Suche"></span>
          <form id="wahlkreis-suche-wrapper" style="display: none;">
            <div class="typeahead-container">
              <div class="typeahead-field">
                <span class="typeahead-query">
                  <input autofocus autocomplete="off" id="wahlkreis-suche" placeholder="Ort eingeben" name="ort" type="search" class="search-field">
                </span>
                <!--<span class="typeahead-button">
                    <button type="submit">
                        <i class="typeahead-search-icon"></i>
                    </button>
                </span>-->
              </div>
            </div>
          </form>
        </span><div class="title">Suche</div><div class="description">Finden sie heraus, in welchem Wahlkreis ihre Gemeinde ist</div></div>
        </div>
      </section>

      <div class="sharing-container">
        <a href="whatsapp://send" data-text="Schau dir mal diese Website an: " data-href="" class="wa_btn wa_btn_m" style="display:none; ">WhatsApp</a>
      </div>
    </div>


    <script>
    $("#wahlkreis-suche").typeahead({
      minLength: 2,
      maxItem: 6,
      hint: true,
      order: "asc",
      display: ["ort"],
      template: "{{ort}}",
      mustSelectItem: "true",
      cache: false,
      source: {url: ["js/wahlkreise.json", "data"]},
      callback: {
          onInit: function (node) {
              console.log('Typeahead Initiated on ' + node.selector);
          },
          onClick: function(node, form, item, event){
            if(typeof(wahlkreis) != "undefined" && wahlkreis !== null){
              $("#wk-"+wahlkreis+" span").removeClass("glow");
            }
            wahlkreis=item.wahlkreis;
            console.log('Search string: '+item.ort + ' / Wahlkreis: ' + wahlkreis);

            console.log("should glowing")
            $("#wk-"+wahlkreis+" span").addClass("glow");
            console.log("#wk-"+wahlkreis+" span");
          }
      },
      debug: true
    });
    </script>
    <script type="text/javascript">
    $(document).ready(function(){
      $(".search .logo").click(function(e){
        e.stopPropagation();

        $(".search .logo .search-logo").hide();
        $(".search .logo #wahlkreis-suche-wrapper").css("display", "inline-block");
        $(".search .logo #wahlkreis-suche").focus();
      });
      $(document).click(function(e){
        var target = e.target;

        if(!$(target).is(".search")){
          if($(".search .logo form#wahlkreis-suche-wrapper").is(":visible")){
            $(".search .logo form#wahlkreis-suche-wrapper").hide();
            $(".search .logo .search-logo").show();
            $(".glow").removeClass("glow");
          }
        }
      });
    })
    </script>
    <script type="text/javascript">if(typeof wabtn4fg==="undefined"){wabtn4fg=1;h=document.head||document.getElementsByTagName("head")[0],s=document.createElement("script");s.type="text/javascript";s.src="whatsapp-button.js";h.appendChild(s);}
    </script>
  </body>
</html>
